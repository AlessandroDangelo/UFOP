\doxysection{unit\+\_\+model.\+cpp}
\label{unit__model_8cpp_source}\index{C:/Users/aless/OneDrive/Documentos/UFOP/Engenharia de Software/Sprint04/Myvensim/test/unit/unit\_model.cpp@{C:/Users/aless/OneDrive/Documentos/UFOP/Engenharia de Software/Sprint04/Myvensim/test/unit/unit\_model.cpp}}
\textbf{ Go to the documentation of this file.}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001 \textcolor{preprocessor}{\#include "{}unit\_model.hpp"{}}}
\DoxyCodeLine{00002 \textcolor{preprocessor}{\#include <assert.hpp>}}
\DoxyCodeLine{00003 }
\DoxyCodeLine{00004 \textcolor{keyword}{using namespace }std;}
\DoxyCodeLine{00005 }
\DoxyCodeLine{00006 \textcolor{comment}{// Function for Model class's constructor unit test.}}
\DoxyCodeLine{00007 \textcolor{keywordtype}{void} unit\_model\_constructor()\{}
\DoxyCodeLine{00008     cout << \textcolor{stringliteral}{"{}TEST 1 -\/ Default constructor of the Model class without passing parameters"{}} << endl;}
\DoxyCodeLine{00009 }
\DoxyCodeLine{00010     Model* model1 =  \textcolor{keyword}{new} ModelImpl();}
\DoxyCodeLine{00011 }
\DoxyCodeLine{00012     \textcolor{comment}{// Making assertion to verify if the name property was initialized with the default data.}}
\DoxyCodeLine{00013     assert(model1-\/>getName() == \textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{00014     \textcolor{comment}{// Making assertion to verify if the time property was initialized with the default data.}}
\DoxyCodeLine{00015     assert(model1-\/>getTime() == 0.0);}
\DoxyCodeLine{00016 }
\DoxyCodeLine{00017     cout << GREEN << \textcolor{stringliteral}{"{}OK!"{}} << RESET << endl;}
\DoxyCodeLine{00018     cout << \textcolor{stringliteral}{"{}TEST 2 -\/ Default constructor of the Model class with passing parameters"{}} << endl;}
\DoxyCodeLine{00019 }
\DoxyCodeLine{00020     System* system1 = \textcolor{keyword}{new} SystemImpl(\textcolor{stringliteral}{"{}System 1"{}});}
\DoxyCodeLine{00021     System* system2 = \textcolor{keyword}{new} SystemImpl(\textcolor{stringliteral}{"{}System 2"{}});}
\DoxyCodeLine{00022 }
\DoxyCodeLine{00023     vector<System*> systems;}
\DoxyCodeLine{00024     }
\DoxyCodeLine{00025     systems.push\_back(system1);}
\DoxyCodeLine{00026     systems.push\_back(system2);}
\DoxyCodeLine{00027     }
\DoxyCodeLine{00028     ExponencialFlow* flow1 = \textcolor{keyword}{new} ExponencialFlow(\textcolor{stringliteral}{"{}Flow 1"{}});}
\DoxyCodeLine{00029     Model* model2 = \textcolor{keyword}{new} ModelImpl(\textcolor{stringliteral}{"{}Test Model"{}}, 1.0);}
\DoxyCodeLine{00030 }
\DoxyCodeLine{00031     model2-\/>add(system1);}
\DoxyCodeLine{00032     model2-\/>add(system2);}
\DoxyCodeLine{00033     model2-\/>add(flow1);    }
\DoxyCodeLine{00034     }
\DoxyCodeLine{00035     \textcolor{comment}{// Making assertion to verify if the name property was initialized with the parameter specified.}}
\DoxyCodeLine{00036     assert(model2-\/>getName() == \textcolor{stringliteral}{"{}Test Model"{}});}
\DoxyCodeLine{00037     \textcolor{comment}{// Making assertion to verify if the time property was initialized with the parameter specified.}}
\DoxyCodeLine{00038     assert(model2-\/>getTime() == 1.0);}
\DoxyCodeLine{00039     \textcolor{comment}{// Making assertion to verify if the Flow object was added to the Model's flows parameter.}}
\DoxyCodeLine{00040     assert((*(model2-\/>beginFlows()))-\/>getName() == \textcolor{stringliteral}{"{}Flow 1"{}});    }
\DoxyCodeLine{00041    }
\DoxyCodeLine{00042     \textcolor{keywordtype}{int} counter = 0;    }
\DoxyCodeLine{00043     \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} sys = model2-\/>beginSystems(); sys != model2-\/>endSystems(); ++sys)\{}
\DoxyCodeLine{00044         \textcolor{comment}{// Making assertion to verify if the systems were added to the systems property.}}
\DoxyCodeLine{00045         assert((*sys)-\/>getName() == systems[counter]-\/>getName());}
\DoxyCodeLine{00046         counter++;}
\DoxyCodeLine{00047     \}}
\DoxyCodeLine{00048 }
\DoxyCodeLine{00049     cout << GREEN << \textcolor{stringliteral}{"{}OK!"{}} << RESET << endl;}
\DoxyCodeLine{00050 \}}
\DoxyCodeLine{00051 }
\DoxyCodeLine{00052 \textcolor{comment}{// Function for the Model class' destructor unit test.}}
\DoxyCodeLine{00053 \textcolor{keywordtype}{void} unit\_model\_destructor()\{}
\DoxyCodeLine{00054     cout << \textcolor{stringliteral}{"{}TEST 3 -\/ Default destructor of the Model class"{}} << endl;}
\DoxyCodeLine{00055     }
\DoxyCodeLine{00056     \textcolor{keywordtype}{double} vmBefore, vmAfter, rss;}
\DoxyCodeLine{00057 }
\DoxyCodeLine{00058     \textcolor{comment}{// Getting the memory usage previous to the creation of a model.}}
\DoxyCodeLine{00059     memory\_usage(vmBefore, rss);}
\DoxyCodeLine{00060     }
\DoxyCodeLine{00061     System* system1 = \textcolor{keyword}{new} SystemImpl(\textcolor{stringliteral}{"{}System 1"{}});}
\DoxyCodeLine{00062     System* system2 = \textcolor{keyword}{new} SystemImpl(\textcolor{stringliteral}{"{}System 2"{}});}
\DoxyCodeLine{00063     ExponencialFlow* flow1 = \textcolor{keyword}{new} ExponencialFlow(\textcolor{stringliteral}{"{}Flow 1"{}});}
\DoxyCodeLine{00064     Model* model = \textcolor{keyword}{new} ModelImpl(\textcolor{stringliteral}{"{}Test Model"{}}, 1.0);}
\DoxyCodeLine{00065 }
\DoxyCodeLine{00066     model-\/>add(system1);}
\DoxyCodeLine{00067     model-\/>add(system2);}
\DoxyCodeLine{00068     model-\/>add(flow1);}
\DoxyCodeLine{00069 }
\DoxyCodeLine{00070     \textcolor{keyword}{delete} model;}
\DoxyCodeLine{00071 }
\DoxyCodeLine{00072     \textcolor{comment}{// Getting the memory usage after the creation and destruction of a Flow object.}}
\DoxyCodeLine{00073     memory\_usage(vmAfter, rss);}
\DoxyCodeLine{00074 }
\DoxyCodeLine{00075     \textcolor{comment}{// Making assertion to verify if the memory usage after the creation and deletion}}
\DoxyCodeLine{00076     \textcolor{comment}{// is the same as before the creation of Model object.}}
\DoxyCodeLine{00077     assert(vmBefore == vmAfter);}
\DoxyCodeLine{00078 }
\DoxyCodeLine{00079     cout << GREEN << \textcolor{stringliteral}{"{}OK!"{}} << RESET << endl;}
\DoxyCodeLine{00080 \}}
\DoxyCodeLine{00081 }
\DoxyCodeLine{00082 \textcolor{comment}{// Function for the Model class' getName() method unit test.}}
\DoxyCodeLine{00083 \textcolor{keywordtype}{void} unit\_model\_getName()\{}
\DoxyCodeLine{00084     cout << \textcolor{stringliteral}{"{}TEST 4 -\/ Model class' getName() method"{}} << endl;}
\DoxyCodeLine{00085     }
\DoxyCodeLine{00086     Model* model = \textcolor{keyword}{new} ModelImpl(\textcolor{stringliteral}{"{}Test Model"{}}, 0.0);}
\DoxyCodeLine{00087     }
\DoxyCodeLine{00088     \textcolor{comment}{// Making assertion to verify if the method returns the Model class name and if it's}}
\DoxyCodeLine{00089     \textcolor{comment}{// equal to the parameter previously passed.}}
\DoxyCodeLine{00090     assert(model-\/>getName() == \textcolor{stringliteral}{"{}Test Model"{}});}
\DoxyCodeLine{00091 }
\DoxyCodeLine{00092     cout << GREEN << \textcolor{stringliteral}{"{}OK!"{}} << RESET << endl;}
\DoxyCodeLine{00093 \}}
\DoxyCodeLine{00094 }
\DoxyCodeLine{00095 \textcolor{comment}{// Function for the Model class' setName() method unit test.}}
\DoxyCodeLine{00096 \textcolor{keywordtype}{void} unit\_model\_setName()\{}
\DoxyCodeLine{00097     cout << \textcolor{stringliteral}{"{}TEST 5 -\/ Model class' setName() method"{}} << endl;}
\DoxyCodeLine{00098 }
\DoxyCodeLine{00099     Model* model = \textcolor{keyword}{new} ModelImpl();}
\DoxyCodeLine{00100     model-\/>setName(\textcolor{stringliteral}{"{}Test Model"{}});}
\DoxyCodeLine{00101     }
\DoxyCodeLine{00102     \textcolor{comment}{// Making assertion to verify if the data of the name property has been altered.}}
\DoxyCodeLine{00103     assert(model-\/>getName() == \textcolor{stringliteral}{"{}Test Model"{}});}
\DoxyCodeLine{00104 }
\DoxyCodeLine{00105     cout << GREEN << \textcolor{stringliteral}{"{}OK!"{}} << RESET << endl;}
\DoxyCodeLine{00106 \}}
\DoxyCodeLine{00107 }
\DoxyCodeLine{00108 \textcolor{comment}{// Function for the Model class' getTime() method unit test.}}
\DoxyCodeLine{00109 \textcolor{keywordtype}{void} unit\_model\_getTime()\{}
\DoxyCodeLine{00110     cout << \textcolor{stringliteral}{"{}TEST 6 -\/ Model class' getTime() method"{}} << endl;}
\DoxyCodeLine{00111 }
\DoxyCodeLine{00112     Model* model = \textcolor{keyword}{new} ModelImpl(\textcolor{stringliteral}{"{}Test Model"{}}, 0.0);}
\DoxyCodeLine{00113 }
\DoxyCodeLine{00114     \textcolor{comment}{// Making assertion to verify if the method returns the Model class time and if it's}}
\DoxyCodeLine{00115     \textcolor{comment}{// equal to the parameter previously passed.}}
\DoxyCodeLine{00116     assert(model-\/>getTime() == 0.0);}
\DoxyCodeLine{00117 }
\DoxyCodeLine{00118     cout << GREEN << \textcolor{stringliteral}{"{}OK!"{}} << RESET << endl;}
\DoxyCodeLine{00119 \}}
\DoxyCodeLine{00120 }
\DoxyCodeLine{00121 \textcolor{comment}{// Function for the Model class' setTime() method unit test.}}
\DoxyCodeLine{00122 \textcolor{keywordtype}{void} unit\_model\_setTime()\{}
\DoxyCodeLine{00123     cout << \textcolor{stringliteral}{"{}TEST 7 -\/ Model class' setTime() method"{}} << endl;}
\DoxyCodeLine{00124 }
\DoxyCodeLine{00125     Model* model = \textcolor{keyword}{new} ModelImpl(\textcolor{stringliteral}{"{}Test Model"{}}, 0.0);}
\DoxyCodeLine{00126     model-\/>setTime(1.0);}
\DoxyCodeLine{00127 }
\DoxyCodeLine{00128     \textcolor{comment}{// Making assertion to verify if the data of the time property has been altered.}}
\DoxyCodeLine{00129     assert(model-\/>getTime() == 1.0);}
\DoxyCodeLine{00130 }
\DoxyCodeLine{00131     cout << GREEN << \textcolor{stringliteral}{"{}OK!"{}} << RESET << endl;}
\DoxyCodeLine{00132 \}}
\DoxyCodeLine{00133 }
\DoxyCodeLine{00134 \textcolor{comment}{// Function for the Model class' incrementTime() method unit test.}}
\DoxyCodeLine{00135 \textcolor{keywordtype}{void} unit\_model\_incrementTime()\{}
\DoxyCodeLine{00136     cout << \textcolor{stringliteral}{"{}TEST 8 -\/ Model class' incrementTime() method"{}} << endl;}
\DoxyCodeLine{00137 }
\DoxyCodeLine{00138     Model* model = \textcolor{keyword}{new} ModelImpl(\textcolor{stringliteral}{"{}Test Model"{}}, 1.0);}
\DoxyCodeLine{00139     model-\/>incrementTime(1.0);}
\DoxyCodeLine{00140     }
\DoxyCodeLine{00141     \textcolor{comment}{// Making assertion to verify if the data of the time property has been incremented.}}
\DoxyCodeLine{00142     assert(model-\/>getTime() == 2.0);}
\DoxyCodeLine{00143 }
\DoxyCodeLine{00144     cout << GREEN << \textcolor{stringliteral}{"{}OK!"{}} << RESET << endl;}
\DoxyCodeLine{00145 \}}
\DoxyCodeLine{00146 }
\DoxyCodeLine{00147 \textcolor{comment}{// Function for the Model class' addSystem() method unit test.}}
\DoxyCodeLine{00148 \textcolor{keywordtype}{void} unit\_model\_addSystem()\{}
\DoxyCodeLine{00149     cout << \textcolor{stringliteral}{"{}TEST 9 -\/ Model class' addSystem() method"{}} << endl;}
\DoxyCodeLine{00150     }
\DoxyCodeLine{00151     System* system = \textcolor{keyword}{new} SystemImpl(\textcolor{stringliteral}{"{}System 1"{}});}
\DoxyCodeLine{00152 }
\DoxyCodeLine{00153     Model* model = \textcolor{keyword}{new} ModelImpl(\textcolor{stringliteral}{"{}Test Model"{}}, 1.0);}
\DoxyCodeLine{00154     model-\/>add(system);}
\DoxyCodeLine{00155 }
\DoxyCodeLine{00156     \textcolor{comment}{// Making assertion to verify if the system has been added to the systems property.}}
\DoxyCodeLine{00157     assert((*(model-\/>beginSystems()))-\/>getName() == system-\/>getName());}
\DoxyCodeLine{00158 }
\DoxyCodeLine{00159     cout << GREEN << \textcolor{stringliteral}{"{}OK!"{}} << RESET << endl;}
\DoxyCodeLine{00160 \}}
\DoxyCodeLine{00161 }
\DoxyCodeLine{00162 \textcolor{comment}{// Function for the Model class' removeSystem() method unit test.}}
\DoxyCodeLine{00163 \textcolor{keywordtype}{void} unit\_model\_removeSystem()\{}
\DoxyCodeLine{00164     cout << \textcolor{stringliteral}{"{}TEST 10 -\/ Model class' removeSystem() method"{}} << endl;}
\DoxyCodeLine{00165 }
\DoxyCodeLine{00166     System* system = \textcolor{keyword}{new} SystemImpl(\textcolor{stringliteral}{"{}System 1"{}});}
\DoxyCodeLine{00167 }
\DoxyCodeLine{00168     Model* model = \textcolor{keyword}{new} ModelImpl(\textcolor{stringliteral}{"{}Test Model"{}}, 1.0);}
\DoxyCodeLine{00169     model-\/>add(system);}
\DoxyCodeLine{00170     model-\/>remove(system);}
\DoxyCodeLine{00171     }
\DoxyCodeLine{00172     \textcolor{comment}{// Making assertion to verify if the system has been removed from the systems property.}}
\DoxyCodeLine{00173     assert(model-\/>beginSystems() == model-\/>endSystems());}
\DoxyCodeLine{00174 }
\DoxyCodeLine{00175     cout << GREEN << \textcolor{stringliteral}{"{}OK!"{}} << RESET << endl;}
\DoxyCodeLine{00176 \}}
\DoxyCodeLine{00177 }
\DoxyCodeLine{00178 \textcolor{comment}{// Function for the Model class' addFlow() method unit test.}}
\DoxyCodeLine{00179 \textcolor{keywordtype}{void} unit\_model\_addFlow()\{}
\DoxyCodeLine{00180     cout << \textcolor{stringliteral}{"{}TEST 11 -\/ Model class' addFlow() method"{}} << endl;}
\DoxyCodeLine{00181 }
\DoxyCodeLine{00182     ExponencialFlow* flow = \textcolor{keyword}{new} ExponencialFlow(\textcolor{stringliteral}{"{}Flow 1"{}});}
\DoxyCodeLine{00183     Model* model = \textcolor{keyword}{new} ModelImpl(\textcolor{stringliteral}{"{}Test Model"{}}, 1.0);}
\DoxyCodeLine{00184     model-\/>add(flow);}
\DoxyCodeLine{00185     }
\DoxyCodeLine{00186     \textcolor{comment}{// Making assertion to verify if the flow has been added to the flows property.}}
\DoxyCodeLine{00187     assert((*(model-\/>beginFlows()))-\/>getName() == flow-\/>getName());}
\DoxyCodeLine{00188 }
\DoxyCodeLine{00189     cout << GREEN << \textcolor{stringliteral}{"{}OK!"{}} << RESET << endl;}
\DoxyCodeLine{00190 \}}
\DoxyCodeLine{00191 }
\DoxyCodeLine{00192 \textcolor{comment}{// Function for the Model class' removeFlow() method unit test.}}
\DoxyCodeLine{00193 \textcolor{keywordtype}{void} unit\_model\_removeFlow()\{}
\DoxyCodeLine{00194     cout << \textcolor{stringliteral}{"{}TEST 12 -\/ Model class' removeFlow() method"{}} << endl;}
\DoxyCodeLine{00195 }
\DoxyCodeLine{00196     ExponencialFlow* flow = \textcolor{keyword}{new} ExponencialFlow(\textcolor{stringliteral}{"{}Flow 1"{}});}
\DoxyCodeLine{00197     Model* model = \textcolor{keyword}{new} ModelImpl(\textcolor{stringliteral}{"{}Test Model"{}}, 1.0);}
\DoxyCodeLine{00198     model-\/>add(flow);}
\DoxyCodeLine{00199     model-\/>remove(flow);}
\DoxyCodeLine{00200 }
\DoxyCodeLine{00201     \textcolor{comment}{// Making assertion to verify if the system has been removed from the systems property.}}
\DoxyCodeLine{00202     assert(model-\/>beginFlows() == model-\/>endFlows());}
\DoxyCodeLine{00203 }
\DoxyCodeLine{00204     cout << GREEN << \textcolor{stringliteral}{"{}OK!"{}} << RESET << endl;}
\DoxyCodeLine{00205 \}}
\DoxyCodeLine{00206 }
\DoxyCodeLine{00207 \textcolor{comment}{// Function for the Model class' execute() method unit test.}}
\DoxyCodeLine{00208 \textcolor{keywordtype}{void} unit\_model\_execute()\{}
\DoxyCodeLine{00209     cout << \textcolor{stringliteral}{"{}TEST 13 -\/ Model class' execute() method"{}} << endl;}
\DoxyCodeLine{00210     }
\DoxyCodeLine{00211     System* pop1 = \textcolor{keyword}{new} SystemImpl(\textcolor{stringliteral}{"{}Population 1"{}}, 100.0);}
\DoxyCodeLine{00212     System* pop2 = \textcolor{keyword}{new} SystemImpl(\textcolor{stringliteral}{"{}Population 2"{}}, 0.0);}
\DoxyCodeLine{00213     ExponencialFlow* expFlow = \textcolor{keyword}{new} ExponencialFlow(\textcolor{stringliteral}{"{}Unlimited Growth"{}}, pop1, pop2);}
\DoxyCodeLine{00214     Model* expModel = \textcolor{keyword}{new} ModelImpl(\textcolor{stringliteral}{"{}Exponential Model"{}}, 0.0);}
\DoxyCodeLine{00215     }
\DoxyCodeLine{00216     expModel-\/>add(pop1);}
\DoxyCodeLine{00217     expModel-\/>add(pop2);}
\DoxyCodeLine{00218     expModel-\/>add(expFlow);}
\DoxyCodeLine{00219 }
\DoxyCodeLine{00220     \textcolor{comment}{// Making assertions for the unit test before execution}}
\DoxyCodeLine{00221     assert(pop1-\/>getName() == \textcolor{stringliteral}{"{}Population 1"{}});}
\DoxyCodeLine{00222     assert(pop2-\/>getName() == \textcolor{stringliteral}{"{}Population 2"{}});}
\DoxyCodeLine{00223     assert(expFlow-\/>getName() == \textcolor{stringliteral}{"{}Unlimited Growth"{}});}
\DoxyCodeLine{00224     assert(expModel-\/>getName() == \textcolor{stringliteral}{"{}Exponential Model"{}});}
\DoxyCodeLine{00225 }
\DoxyCodeLine{00226     assert(abs(pop1-\/>getValue() -\/ 100.0) < 0.0001);}
\DoxyCodeLine{00227     assert(abs(pop2-\/>getValue() -\/ 0.0) < 0.0001);}
\DoxyCodeLine{00228     assert(abs(expModel-\/>getTime() -\/ 0.0) < 0.0001);}
\DoxyCodeLine{00229 }
\DoxyCodeLine{00230     expModel-\/>execute(0, 100, 1);}
\DoxyCodeLine{00231 }
\DoxyCodeLine{00232     \textcolor{comment}{// Making assertions for the unit test after execution}}
\DoxyCodeLine{00233     assert(abs(pop1-\/>getValue() -\/ 36.6032) < 0.0001);}
\DoxyCodeLine{00234     assert(abs(pop2-\/>getValue() -\/ 63.3968) < 0.0001);}
\DoxyCodeLine{00235     assert(abs(expModel-\/>getTime() -\/ 100.0) < 0.0001);}
\DoxyCodeLine{00236 }
\DoxyCodeLine{00237     cout << GREEN << \textcolor{stringliteral}{"{}OK!"{}} << RESET << endl;}
\DoxyCodeLine{00238 \}}
\DoxyCodeLine{00239 }
\DoxyCodeLine{00240 \textcolor{comment}{// Function to run all the Model class' unit tests.}}
\DoxyCodeLine{00241 \textcolor{keywordtype}{void} run\_unit\_tests\_model()\{}
\DoxyCodeLine{00242     }
\DoxyCodeLine{00243     \textcolor{comment}{// Calling all the Model class' unit test functions.}}
\DoxyCodeLine{00244     unit\_model\_constructor();}
\DoxyCodeLine{00245     unit\_model\_destructor();}
\DoxyCodeLine{00246     unit\_model\_getName();}
\DoxyCodeLine{00247     unit\_model\_setName();}
\DoxyCodeLine{00248     unit\_model\_getTime();}
\DoxyCodeLine{00249     unit\_model\_setTime();}
\DoxyCodeLine{00250     unit\_model\_incrementTime();}
\DoxyCodeLine{00251     unit\_model\_addSystem();}
\DoxyCodeLine{00252     unit\_model\_removeSystem();}
\DoxyCodeLine{00253     unit\_model\_addFlow();}
\DoxyCodeLine{00254     unit\_model\_removeFlow();}
\DoxyCodeLine{00255     unit\_model\_execute();}
\DoxyCodeLine{00256 }
\DoxyCodeLine{00257 \}}

\end{DoxyCode}
